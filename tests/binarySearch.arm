numbers	DCD	1, 3, 6, 10, 15, 21, 22, 24, 25, 30


		MOV R0, #0
        MOV R1, #9
        LDR R2, =numbers
        MOV R3, #22

		SUB SP, SP, #4
		STR R0, [SP, #4]    
		STR R1, [SP, #3]     
		STR R2, [SP, #2]      
		STR R3, [SP, #1]       
		
		BL BSEARCH	

		LDR R4, [SP, #2]      
		LDR R5, [SP, #1]      
		ADD SP, SP, #6        

		END                    

BSEARCH

		SUB SP, SP, #2	

		STMDA SP!, {LR, FP, R0, R1, R2, R3, R4, R5, R6, R7}
		ADD FP, SP, #16        

		LDR R0, [FP, #0]       
		LDR R1, [FP, #-1]      

			
		CMP R0, R1             
		BLE CONTINUE	       
			
		
		MOV R4, #0	
		MOV R5, #-1	
    		STR R4, [FP, #-4]     
		STR R5, [FP, #-5]      
			
		BAL RESTORE	

CONTINUE
		ADD R6, R0, R1		
		ASR R6, R6, #1		

		LDR R7, [R2, R6, LSL #2]	

		CMP R7, R3		
       		BNE NOTFOUND     	


		MOV R4, #1		
		MOV R5, R6		
    		STR R4, [FP, #-4]     
		STR R5, [FP, #-5]      
			
		BAL RESTORE		


NOTFOUND
		
		CMP R3, R7
		BGT RSEARCH
 
	
		
		LDR R0, [FP, #0]	
		LDR R1, [FP, #-1]       
		LDR R2, [FP, #-2]     
		LDR R3, [FP, #-3]      

		SUB R1, R6, #1          
			
		SUB SP, SP, #4        
		STR R0, [SP, #4]      
		STR R1, [SP, #3]      
		STR R2, [SP, #2]        
		STR R3, [SP, #1]       
			
		BL BSEARCH		

		LDR R4, [SP, #1]	
		LDR R5, [SP, #2]	

		ADD SP, SP, #6      	

		STR R4, [FP, #-5]	
		STR R5, [FP, #-4]	

		BAL RESTORE		


RSEARCH


		LDR R0, [FP, #0]	
		LDR R1, [FP, #-1]     
		LDR R2, [FP, #-2]    
		LDR R3, [FP, #-3]   

		ADD R0, R6, #1          
			
		SUB SP, SP, #4        
		STR R0, [SP, #4]      
		STR R1, [SP, #3]      
		STR R2, [SP, #2]        
		STR R3, [SP, #1]        
			
		BL BSEARCH		

		LDR R4, [SP, #1]	
		LDR R5, [SP, #2]	

		ADD SP, SP, #6      	

		STR R4, [FP, #-5]	
		STR R5, [FP, #-4] 


RESTORE
		LDMIB	SP!, {LR, FP, R0, R1, R2, R3, R4, R5, R6, R7}

		MOV	PC, LR        
